{"version":3,"sources":["pages/SecretPage.js","pages/SignInPage.js","router.js","index.js"],"names":["SecretPage","domain","useAuth0","user","logout","getAccessTokenSilently","useState","apiToken","setApiToken","initialCheck","setInitialCheck","status","setStatus","getStatus","a","path","console","log","axios","get","headers","Authorization","response","data","error","useEffect","audience","token","className","email","name","state","machine","onClick","post","SignInPage","loginWithPopup","history","useHistory","push","RouterProvider","to","PrivateRoute","children","rest","isAuthenticated","isLoading","ReactDOM","render","StrictMode","clientId","redirectUri","window","location","origin","document","getElementById"],"mappings":"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","file":"static/js/main.22c9854f.chunk.js","sourcesContent":["import '../App.css';\n// import logo from '../logo.svg';\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport const SecretPage = () => {\n\n  const domain = \"https://4e319ih020.execute-api.eu-west-3.amazonaws.com\"\n  const { user, logout, getAccessTokenSilently } = useAuth0();\n  const [apiToken, setApiToken] = useState(\"\");\n  const [initialCheck, setInitialCheck] = useState(false);\n  const [status, setStatus] = useState([]);\n\n  const getStatus = () => {\n    (async () => {\n        try {\n            const path = \"/default/status\"\n            // const headers = {\n            //                     // 'authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Il95RXRhTV9DM3ZZUS1CTWs4TDVwViJ9.eyJpc3MiOiJodHRwczovL2Rldi1hbi1jMG1pay5ldS5hdXRoMC5jb20vIiwic3ViIjoiU3BKZ2hHYUdpRk1WWkI4RFdiYThyZHJLeEdMVHd6eXRAY2xpZW50cyIsImF1ZCI6Imh0dHBzOi8vYXV0aDAtand0LWF1dGhvcml6ZXIiLCJpYXQiOjE2MzU2MTQ0NDQsImV4cCI6MTYzNTcwMDg0NCwiYXpwIjoiU3BKZ2hHYUdpRk1WWkI4RFdiYThyZHJLeEdMVHd6eXQiLCJndHkiOiJjbGllbnQtY3JlZGVudGlhbHMifQ.BckMSGMq1OdUrqjjFREfmkPxJgW9KABnnBxpCdZRJUVRgwO2q6xOcVe4qIBaRF6WhI1lxwdCbLxTzP0kq8QfnxEasYLQ3YknA1W3qD8gFtvH51grAQRNRWC9Ylu81c_DpF0LeH77uFKuYJ0TjDanK6-x-_QZavDWO0E3ROwjne9sng-gZ2tqgy4XgpJCgRxZKYHSIucqhzzftxIgzQl_K-f3y7kFpZAtTqGfKqghH4vdiEh7nmfzGeP1YOlUZZF-xutVwHi5oopehOOE5c9P9-LNG_UxIzCb7L3gMMrk3y2kkmpoh9SY9-67BdY5gc-wkDgaG7DETXVi4xYtDt8zqQ',\n            //                     // 'Access-Control-Allow-Headers': 'Content-Type',\n            //                     // 'Access-Control-Allow-Origin': 'https://nh9nbc5323.execute-api.eu-west-3.amazonaws.com/default/EC2_Handler/status',\n            //                     // 'Access-Control-Allow-Methods': 'OPTIONS,POST,GET'\n            //                 }\n            console.log(domain+path, apiToken)\n            const response = await axios.get(domain+path, { \n                                                        headers: {\n                                                            Authorization: 'Bearer ' + apiToken,\n                                                            \"Access-Control-Allow-Origin\": \"https://4e319ih020.execute-api.eu-west-3.amazonaws.com\"\n                                                        }})\n            console.log(response.data)\n            setInitialCheck(true)\n            setStatus(response.data)\n        } catch (e) {\n          console.error(e);\n        }\n      })();\n    console.log(\"bonjour\");\n  };\n\n  const startServer = () => {\n    (async () => {\n        try {\n            const path = \"/default/start\"\n            console.log(domain+path)\n            const response = await axios.post(domain+path)\n          console.log(response.data)\n        } catch (e) {\n          console.error(e);\n        }\n      })();\n    console.log(\"bonjour\");\n  };\n\n  const stopServer = () => {\n\n    (async () => {\n        try {\n            const path = \"/default/stop\"\n            console.log(domain+path)\n            const response = await axios.post(domain+path)\n          console.log(response.data)\n        } catch (e) {\n          console.error(e);\n        }\n      })();\n    console.log(\"bonjour\");\n  };\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const token = await getAccessTokenSilently({\n          audience: 'https://minecraft-server-jwt.fr',\n        });\n        setApiToken(token)\n        \n        console.log(token);\n        // Temporary for local developement\n        // setApiToken(\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Il95RXRhTV9DM3ZZUS1CTWs4TDVwViJ9.eyJpc3MiOiJodHRwczovL2Rldi1hbi1jMG1pay5ldS5hdXRoMC5jb20vIiwic3ViIjoiYXV0aDB8NjE3ZDQwMTVkMTk0YTIwMDZjZjM5YjQxIiwiYXVkIjpbImh0dHBzOi8vYXV0aDAtand0LWF1dGhvcml6ZXIiLCJodHRwczovL2Rldi1hbi1jMG1pay5ldS5hdXRoMC5jb20vdXNlcmluZm8iXSwiaWF0IjoxNjM1NjA1NDEwLCJleHAiOjE2MzU2OTE4MTAsImF6cCI6InRwOHlDY29iTWx1eDBQUjIyS0FtWTdyWUNlYVZ2aTNtIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.ebdOgziFsO8u3QXz5fO__Sd0G7zJZJfCjL9qTWJAfN7NIFWmEz1P60_zhGT-3aJu38F7v8vFB8yNFUMRdoSRmMbgwzDc7JZslyl-S_BmPskK2JoUhufTz9tv5JDY4EwaW4jiZl610eEi5JPrqPP-vMpiK87GpTH4GyFbVkx9xvnlxfe1EX06Hg3dehQTR1oiRfKpywcKD5qak5d8E-aKwE3jHhECDLYOF51OEhlsZzfR1_6hqN0JD-eQ7cljfLLHi4YP0Nw0z0kDeli7p_itILEvTKKu_uiziroB7mCP7PwlYY_VI777re7Ci8X8MR_2b0foA0MoFBsyD9rIhdbxGQ\")\n      } catch (e) {\n        console.error(e);\n      }\n    })();\n  }, [getAccessTokenSilently]);\n\n  if(!initialCheck){\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">  \n                {/* <img src={logo} className=\"App-logo\" alt=\"logo\"/>  */}\n                <h1 className=\"App-title\">Hi {user.email}! Welcome to the minecraft server manager page</h1>\n            </header>\n            <div><button onClick={getStatus}>Check server status</button></div>\n            \n            \n        </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n        <header className=\"App-header\">   \n            {/* <img src={logo} className=\"App-logo\" alt=\"logo\"/> */}\n            <h1 className=\"App-title\">Hi {user.email}! Welcome to the minecraft server manager page</h1>\n        </header>\n        <div><p>the status of the server <b>{status.name}</b> is {status.state} on a {status.machine} machine</p></div>\n        <div>\n            <button onClick={getStatus}>Check server status</button>\n            <button onClick={startServer}>Start the server</button>\n            <button onClick={stopServer}>Stop the server</button>\n        </div>\n        <div><button onClick={logout}>Sign Out</button></div>\n    </div>\n);\n\n};","import { useAuth0 } from \"@auth0/auth0-react\";\nimport { useHistory } from \"react-router\";\n\nexport const SignInPage = () => {\n  const { loginWithPopup } = useAuth0();\n  const history = useHistory();\n\n  return (\n    <button\n      onClick={async () => {\n        await loginWithPopup();\n        history.push(\"/secret\");\n      }}\n    >\n      Sign In\n    </button>\n  );\n};","import { useAuth0 } from \"@auth0/auth0-react\";\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport { SecretPage } from \"./pages/SecretPage\";\nimport { SignInPage } from \"./pages/SignInPage\";\n\nexport const RouterProvider = () => {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/sign-in\">\n          <SignInPage />\n        </Route>\n        <PrivateRoute path=\"/secret\">\n          <SecretPage />\n        </PrivateRoute>\n        <Redirect to=\"/sign-in\" />\n      </Switch>\n    </Router>\n  );\n};\n\nconst PrivateRoute = ({ children, ...rest }) => {\n  const { isAuthenticated, isLoading } = useAuth0();\n\n  if (isLoading) return <>...loading</>;\n\n  return (\n    <Route {...rest}>\n      {isAuthenticated ? children : <Redirect to=\"sign-in\" />}\n    </Route>\n  );\n};","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Auth0Provider } from \"@auth0/auth0-react\";\nimport { RouterProvider } from \"./router\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Auth0Provider\n      domain=\"minecraft-server.eu.auth0.com\"\n      clientId=\"nJL367sqaqGJzXppK9xJV0qgquka1bom\"\n      redirectUri={window.location.origin}\n    >\n      <RouterProvider />\n    </Auth0Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}